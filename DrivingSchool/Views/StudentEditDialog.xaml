<Window x:Class="DrivingSchool.Views.StudentEditDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Редактирование учащегося" 
        Height="650" 
        Width="600"
        WindowStartupLocation="CenterOwner"
        ResizeMode="NoResize">

    <ScrollViewer VerticalScrollBarVisibility="Auto">
        <Grid Margin="20">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="120"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <!-- Заголовок -->
            <TextBlock Grid.Row="0" Grid.ColumnSpan="2" 
                       Text="{Binding Title, RelativeSource={RelativeSource FindAncestor, AncestorType=Window}}"
                       FontSize="16" FontWeight="Bold" Margin="0,0,0,20"/>

            <!-- Фамилия -->
            <TextBlock Grid.Row="1" Grid.Column="0" Text="Фамилия:*" VerticalAlignment="Center" Margin="0,5"/>
            <TextBox x:Name="LastNameTextBox" Grid.Row="1" Grid.Column="1" 
                     Text="{Binding LastName, UpdateSourceTrigger=PropertyChanged}" 
                     Margin="0,5" Padding="5" MaxLength="50"/>

            <!-- Имя -->
            <TextBlock Grid.Row="2" Grid.Column="0" Text="Имя:*" VerticalAlignment="Center" Margin="0,5"/>
            <TextBox x:Name="FirstNameTextBox" Grid.Row="2" Grid.Column="1" 
                     Text="{Binding FirstName, UpdateSourceTrigger=PropertyChanged}" 
                     Margin="0,5" Padding="5" MaxLength="50"/>

            <!-- Отчество -->
            <TextBlock Grid.Row="3" Grid.Column="0" Text="Отчество:" VerticalAlignment="Center" Margin="0,5"/>
            <TextBox x:Name="MiddleNameTextBox" Grid.Row="3" Grid.Column="1" 
                     Text="{Binding MiddleName, UpdateSourceTrigger=PropertyChanged}" 
                     Margin="0,5" Padding="5" MaxLength="50"/>

            <!-- Дата рождения -->
            <TextBlock Grid.Row="4" Grid.Column="0" Text="Дата рождения:*" VerticalAlignment="Center" Margin="0,5"/>
            <DatePicker x:Name="BirthDatePicker" Grid.Row="4" Grid.Column="1" 
                        SelectedDate="{Binding BirthDate}"
                        Margin="0,5" Padding="5" Height="30"/>

            <!-- Место рождения -->
            <TextBlock Grid.Row="5" Grid.Column="0" Text="Место рождения:" VerticalAlignment="Center" Margin="0,5"/>
            <TextBox x:Name="BirthPlaceTextBox" Grid.Row="5" Grid.Column="1" 
                     Text="{Binding BirthPlace, UpdateSourceTrigger=PropertyChanged}" 
                     Margin="0,5" Padding="5" MaxLength="200"/>

            <!-- Телефон -->
            <TextBlock Grid.Row="6" Grid.Column="0" Text="Телефон:*" VerticalAlignment="Center" Margin="0,5"/>
            <TextBox x:Name="PhoneTextBox" Grid.Row="6" Grid.Column="1" 
                     Text="{Binding Phone, UpdateSourceTrigger=PropertyChanged}" 
                     Margin="0,5" Padding="5" MaxLength="20"/>

            <!-- Email -->
            <TextBlock Grid.Row="7" Grid.Column="0" Text="Email:" VerticalAlignment="Center" Margin="0,5"/>
            <TextBox x:Name="EmailTextBox" Grid.Row="7" Grid.Column="1" 
                     Text="{Binding Email, UpdateSourceTrigger=PropertyChanged}" 
                     Margin="0,5" Padding="5" MaxLength="100"/>

            <!-- Гражданство -->
            <TextBlock Grid.Row="8" Grid.Column="0" Text="Гражданство:" VerticalAlignment="Center" Margin="0,5"/>
            <TextBox x:Name="CitizenshipTextBox" Grid.Row="8" Grid.Column="1" 
                     Text="{Binding Citizenship, UpdateSourceTrigger=PropertyChanged}" 
                     Margin="0,5" Padding="5" MaxLength="100"/>

            <!-- Пол -->
            <TextBlock Grid.Row="9" Grid.Column="0" Text="Пол:" VerticalAlignment="Center" Margin="0,5"/>
            <ComboBox x:Name="GenderComboBox" Grid.Row="9" Grid.Column="1" 
                      SelectedValuePath="Content" SelectedValue="{Binding Gender}"
                      Margin="0,5" Padding="5" Height="30">
                <ComboBoxItem Content="Мужской" IsSelected="True"/>
                <ComboBoxItem Content="Женский"/>
            </ComboBox>

            <!-- Группа -->
            <TextBlock Grid.Row="10" Grid.Column="0" Text="Группа:" VerticalAlignment="Center" Margin="0,5"/>
            <ComboBox x:Name="GroupComboBox" Grid.Row="10" Grid.Column="1" 
                      DisplayMemberPath="DisplayText" SelectedValuePath="Id"
                      SelectedValue="{Binding GroupId}"
                      Margin="0,5" Padding="5" Height="30"/>

            <!-- Категория ТС -->
            <TextBlock Grid.Row="11" Grid.Column="0" Text="Категория:*" VerticalAlignment="Center" Margin="0,5"/>
            <ComboBox x:Name="CategoryComboBox" Grid.Row="11" Grid.Column="1" 
                      DisplayMemberPath="DisplayText" SelectedValuePath="Id"
                      SelectedValue="{Binding VehicleCategoryId}"
                      Margin="0,5" Padding="5" Height="30"/>

            <!-- Инструктор -->
            <TextBlock Grid.Row="12" Grid.Column="0" Text="Инструктор:" VerticalAlignment="Center" Margin="0,5"/>
            <ComboBox x:Name="InstructorComboBox" Grid.Row="12" Grid.Column="1" 
                      DisplayMemberPath="FullName" SelectedValuePath="Id"
                      SelectedValue="{Binding InstructorId}"
                      Margin="0,5" Padding="5" Height="30"/>

            <!-- Автомобиль -->
            <TextBlock Grid.Row="13" Grid.Column="0" Text="Автомобиль:" VerticalAlignment="Center" Margin="0,5"/>
            <ComboBox x:Name="CarComboBox" Grid.Row="13" Grid.Column="1" 
                      DisplayMemberPath="DisplayText" SelectedValuePath="Id"
                      SelectedValue="{Binding CarId}"
                      Margin="0,5" Padding="5" Height="30"/>

            <!-- Возраст (авто) -->
            <TextBlock Grid.Row="14" Grid.Column="0" Text="Возраст:" VerticalAlignment="Center" Margin="0,5"/>
            <TextBox x:Name="AgeTextBox" Grid.Row="14" Grid.Column="1" 
                 Text="{Binding Age, Mode=OneWay}" IsReadOnly="True"
                 Margin="0,5" Padding="5" Background="#F0F0F0"/>
            
            <!-- Кнопки -->
            <StackPanel Grid.Row="16" Grid.ColumnSpan="2" 
                        Orientation="Horizontal" 
                        HorizontalAlignment="Right" 
                        Margin="0,20,0,0">
                <Button Content="Сохранить" 
                        Click="SaveButton_Click" 
                        Width="100" Height="35" 
                        Background="#4CAF50" Foreground="White"
                        Margin="0,0,10,0"/>
                <Button Content="Отмена" 
                        Click="CancelButton_Click" 
                        Width="100" Height="35" 
                        Background="#f44336" Foreground="White"/>
            </StackPanel>

            <TextBlock Grid.Row="0" Grid.ColumnSpan="2" Text="* - обязательные поля" 
                       Foreground="Gray" FontSize="11" HorizontalAlignment="Right" Margin="0,0,0,20"/>
        </Grid>
    </ScrollViewer>
</Window>